---
title: "Project 1 Proposal"
author: "Elated Anura"
output: 
  github_document:
    toc: true
    toc_depth: 2
---

```{r load-packages, message = FALSE, include = FALSE}
library(tidyverse) # data manipulation
library(psych) # describe function: statistical summary
library(broom) # tidy function: statistical outputs into tibbles
library(kableExtra) # make-up tables
library(stargazer) # nice regression outputs
library(here) # simplifies relative file paths
```


## Dataset

```{r load-data, message=FALSE, warning=FALSE, echo=FALSE}
olympics_data <- read_csv(here("data", "olympics.csv"))
```

The dataset we’re analyzing is available on kaggle and contains historical data on the modern Olympic game including all games starting from Athens 1896 till 2016. This data was scraped from [www.sports-reference.com](www.sports-reference.com) in 2018 and wrangled by rgriffin. Until 1992, winter and summer games used to be held in the same year. Since 1992, both summer and winter games have been taking place in a 4-year cycle (an olympiad!), resulting in winter games in 1994, summer in 1996, then again winter in 1998, and so on. The data set contains rich information on worldwide participation in Olympic Games across the years. We choose it because we're interested in the Olympics, and we believe we can show political and historical trends influencing countries' performances.

This data contains 271,116 observations and 15 variables. Each row contains data on an individual athlete participating in an individual Olympic event. There is data on 66 different sports, 1,184 different teams, 51 games, 230 different NOCs, 42 different host cities across 35 different years. The description of variables is included in the codebook in the `readme` file in the data folder in this repository.

```{r message=FALSE, warning=FALSE, echo=FALSE}
season <- olympics_data %>% 
  group_by(season) %>%
  summarize(count = n())
olympics_data %>%
  group_by(city) %>%
   summarise(count=n())
```


After excluding missing values, 72.5 percent of the participants in our data set are male whereas the rest are female. The average age of the athletes is 25.6 years, with the oldest athlete being 97 years old, and the youngest being 10 years old. The average athlete's height is 175.4cm, the maximum height is 226cm, and the minimum height is 127 cm. The average weight of an athlete is 70.7 kilograms, with the maximum being 214kg and the minimum being 25kg. 222,552 of the athletes participated in the summer games, while 48,564 participated in the winter season.

```{r variable-description, message=FALSE, warning=FALSE, echo=FALSE}
#create dummy variables to ease statistical analysis
olympics_data$sex_dummy <- ifelse(olympics_data$sex=="M", 1,0)
vars_of_interest <- c("sex_dummy", "age", "height", "weight")
olympics_data %>%
  select(vars_of_interest) %>%
  lapply(., function(i) summary(i, na.rm =TRUE)) %>% 
  do.call(rbind, .) %>%
  kable(digits = 3)
olympics_data %>%
  group_by(team) %>%
   summarise(count=n())
olympics_data %>%
  group_by(sport) %>%
   summarise(count=n())
olympics_data %>%
  group_by(city) %>%
   summarise(count=n())
# this gives the number of participants who participated in the games held in these cities
olympics_data %>%
  group_by(season) %>%
   summarise(count=n())
length(unique(olympics_data$sport))
length(unique(olympics_data$team))
length(unique(olympics_data$games))
length(unique(olympics_data$year))
length(unique(olympics_data$noc))
length(unique(olympics_data$city))
```

## Questions

We're planning on creating graphs that will allows us to answer the following two questions:

1. How has the dominance of the Soviet Union/Russia and the United States changed throughout the cold war and after? Has the share of medals won by either NATO or Warsaw Pact countries decreased since the end of the cold war?

2. Given persisting gender inequalities in many countries, we are interested in analyzing gender representation at the Olympics. Does the proportion of female to male athletes differ between countries on different continents? Further, does the distribution of medals won by female vs male athletes differ between the different continents as well?

## Analysis plan

The following lays out our plan for answering each of the research questions. A major challenge that spans both of these questions is that as of now, the dataset does not include the names of the countries each athelete represents. We will be using country code data from [geonames.org](geonames.org) to match each country code in the `NOC` variable with a proper country name.

1. In a first step, we will construct a time-series plot comparing the number of medals won by the United States and the USSR/Russia and all other countries. We plot the variable ‘year’ on the x-axis and a newly created variable counting the number of gold medals per country on the y axis. Finally, different colors (or facets, to be determined) will indicate whether medals were won in the Summer Olympics or the Winter Olympics, as well as display cumulative medal wins. In a second step, we expand the same analysis to not only include the United States and the USSR/Russia, but to include member-states of both NATO and the Warsaw Pact. In order to do so, we will create a variable indicating whether a country is part of NATO, the Warsaw Pact, or non-aligned.

2. We will construct two plots to assess the second set of questions. Our first plot, a time-series plot, will indicate the proportion of female to male athletes on the y axis and year of the Olympic games on the x axis. Furthermore, we will make use of the color aesthetic to color code different lines by continent. Our second plot will replicate the same basic structure, except on the y axis it will map the proportion of medals won by female athletes by continent, which is again indicated by the color aesthetic.

Note: Just to distinguish the exact variables used in explaining Q1 and Q2 so they are not completely overlapping, the potentially used variables are listed here:

Q1: year/time, country (new variable derived from NOC), average number of medals per country (new), types of medals, seasons, NATO/Warsaw Pact member states (new)

Q2: country (new variable derived from NOC), sex, continent (new), medal, year